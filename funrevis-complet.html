<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FunRevis - Plateforme d'apprentissage compl√®te</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .main-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }

        .navigation {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .nav-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1.5rem;
            border-radius: 15px;
            text-decoration: none;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .nav-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .module-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .module-card:hover {
            background: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .module-card.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .module-card h4 {
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .module-card p {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .module-progress {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #28a745;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .lesson-area {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 2rem;
            margin-top: 2rem;
            min-height: 500px;
        }

        .phase-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e9ecef;
        }

        .phase-tab {
            padding: 1rem 1.5rem;
            background: #f8f9fa;
            border: none;
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .phase-tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .phase-content {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            margin-top: 1rem;
        }

        .cours-section {
            background: #e3f2fd;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            border-left: 4px solid #2196f3;
        }

        .exercice-item {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .exercice-item:hover {
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .question {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            font-weight: 600;
            color: #333;
        }

        .options {
            display: grid;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            background: #e9ecef;
            border-color: #667eea;
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .option.correct {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }

        .option.incorrect {
            background: #dc3545;
            color: white;
            border-color: #dc3545;
        }

        .explication {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
        }

        .aide {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-style: italic;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .score-display {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
            margin: 1rem 0;
        }

        .hidden {
            display: none;
        }

        .properties-list {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .properties-list li {
            margin: 0.5rem 0;
            padding-left: 1rem;
        }

        .examples-section {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .input-field {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            margin: 0.5rem 0;
        }

        .input-field:focus {
            border-color: #667eea;
            outline: none;
        }

        .metacognition-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .auto-evaluation {
            background: #e3f2fd;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .criteria-item {
            display: flex;
            align-items: center;
            margin: 0.5rem 0;
        }

        .criteria-item input {
            margin-right: 0.5rem;
        }

        .section-content {
            margin: 0.5rem 0;
        }

        .section-content p {
            margin: 0.3rem 0;
            padding-left: 0.5rem;
        }

        .section-content p strong {
            color: #667eea;
            display: block;
            margin-top: 0.8rem;
            margin-bottom: 0.3rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .modules-grid {
                grid-template-columns: 1fr;
            }
            
            .phase-tabs {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì FunRevis</h1>
            <p>Plateforme d'apprentissage interactive - Math√©matiques 6√®me</p>
        </div>

        <div class="main-content">
            <!-- Navigation principale -->
            <div id="main-nav" class="navigation">
                <div class="nav-card" onclick="showMathModules()">
                    <h3>üìö Math√©matiques 6√®me</h3>
                    <p>22 modules complets avec cours et exercices</p>
                </div>
                <div class="nav-card" onclick="showProgress()">
                    <h3>üìä Suivi des Progr√®s</h3>
                    <p>Visualisez votre progression d√©taill√©e</p>
                </div>
            </div>

            <!-- Section des modules de math√©matiques -->
            <div id="math-modules" class="hidden">
                <h2>üìö Modules de Math√©matiques 6√®me</h2>
                <button class="btn" onclick="showMainNav()">‚Üê Retour</button>
                
                <div class="modules-grid" id="modules-container">
                    <!-- Les modules seront g√©n√©r√©s dynamiquement -->
                </div>
            </div>

            <!-- Zone d'apprentissage -->
            <div id="lesson-area" class="lesson-area hidden">
                <div id="lesson-header">
                    <button class="btn" onclick="showMathModules()">‚Üê Retour aux modules</button>
                    <h2 id="module-title">Module de Math√©matiques</h2>
                </div>
                
                <!-- Onglets des phases -->
                <div class="phase-tabs" id="phase-tabs">
                    <!-- G√©n√©r√©s dynamiquement -->
                </div>
                
                <div id="lesson-content" class="phase-content">
                    <!-- Le contenu sera ins√©r√© ici -->
                </div>
                
                <div class="score-display hidden" id="score-display">Score: 0/0</div>
            </div>

            <!-- Section Progr√®s -->
            <div id="progress-section" class="hidden">
                <h2>üìä Suivi des Progr√®s</h2>
                <button class="btn" onclick="showMainNav()">‚Üê Retour</button>
                <div id="progress-content">
                    <!-- Contenu g√©n√©r√© dynamiquement -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Donn√©es compl√®tes des modules avec contenu p√©dagogique riche
        const modulesData = {
            'nombres-entiers': {
                titre: "Nombres entiers naturels",
                description: "Comprendre et manipuler les nombres entiers naturels",
                emoji: "üî¢",
                phase1: {
                    titre: "üß† Que sais-je d√©j√† ?",
                    objectif: "Activer les connaissances pr√©alables sur les nombres entiers",
                    consignes: "Cette phase permet d'identifier ce que tu sais d√©j√† sur les nombres entiers naturels. Ne t'inqui√®te pas si tu ne connais pas toutes les r√©ponses !",
                    exercices: [
                        {
                            type: "qcm",
                            question: "Qu'est-ce qu'un nombre entier naturel ?",
                            options: [
                                "Un nombre positif sans virgule comme 0, 1, 2, 3...",
                                "Un nombre avec une virgule comme 2,5 ou 3,14", 
                                "Un nombre n√©gatif comme -5 ou -12",
                                "Une fraction comme 1/2 ou 3/4"
                            ],
                            correct: 0,
                            explication: "Les nombres entiers naturels sont les nombres positifs sans virgule : 0, 1, 2, 3, 4, 5... Ils permettent de compter des objets entiers."
                        },
                        {
                            type: "qcm",
                            question: "Dans le nombre 2 547, quel chiffre est dans la position des centaines ?",
                            options: ["2", "5", "4", "7"],
                            correct: 1,
                            explication: "Dans 2 547 : 2 est le chiffre des milliers, 5 est le chiffre des centaines, 4 est le chiffre des dizaines, 7 est le chiffre des unit√©s."
                        },
                        {
                            type: "exercice",
                            question: "√âcris en chiffres : deux mille trois cent quarante-cinq",
                            reponse: "2345",
                            aide: "D√©compose le nombre : deux mille = 2000, trois cent = 300, quarante = 40, cinq = 5. Donc 2000 + 300 + 40 + 5 = 2345"
                        },
                        {
                            type: "qcm",
                            question: "Quel est le plus grand de ces nombres ?",
                            options: ["999", "1 000", "1 001", "1 010"],
                            correct: 3,
                            explication: "Pour comparer des nombres, on regarde d'abord le nombre de chiffres, puis on compare chiffre par chiffre de gauche √† droite."
                        }
                    ]
                },
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "D√©couvrir les propri√©t√©s et la repr√©sentation des nombres entiers naturels",
                    cours: {
                        introduction: "Les nombres entiers naturels sont partout autour de nous ! Ils nous permettent de compter, mesurer, classer et ordonner. D√©couvrons leurs secrets...",
                        definition: "Les nombres entiers naturels sont les nombres que l'on utilise pour compter : 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12... Cette suite continue √† l'infini !",
                        sections: [
                            {
                                titre: "üéØ Qu'est-ce qu'un nombre entier naturel ?",
                                contenu: [
                                    "‚Ä¢ Ce sont les nombres de comptage : 0, 1, 2, 3, 4, 5...",
                                    "‚Ä¢ Ils n'ont jamais de virgule (pas de partie d√©cimale)",
                                    "‚Ä¢ Ils sont tous positifs ou nuls (jamais n√©gatifs)",
                                    "‚Ä¢ Le plus petit nombre entier naturel est 0",
                                    "‚Ä¢ Il n'y a pas de plus grand nombre entier naturel (ils sont infinis)"
                                ]
                            },
                            {
                                titre: "üî¢ Les chiffres et les nombres",
                                contenu: [
                                    "‚Ä¢ Un CHIFFRE est un symbole : 0, 1, 2, 3, 4, 5, 6, 7, 8, 9",
                                    "‚Ä¢ Un NOMBRE peut √™tre √©crit avec un ou plusieurs chiffres",
                                    "‚Ä¢ Exemple : dans le nombre 1 847, il y a 4 chiffres : 1, 8, 4, 7",
                                    "‚Ä¢ La position d'un chiffre dans un nombre d√©termine sa valeur"
                                ]
                            },
                            {
                                titre: "üìä La valeur positionnelle",
                                contenu: [
                                    "‚Ä¢ Dans notre syst√®me d√©cimal, chaque position a une valeur 10 fois plus grande que la position √† sa droite",
                                    "‚Ä¢ De droite √† gauche : unit√©s, dizaines, centaines, milliers, dizaines de milliers...",
                                    "‚Ä¢ Exemple avec 3 456 :",
                                    "  - 6 est dans la position des unit√©s : 6 √ó 1 = 6",
                                    "  - 5 est dans la position des dizaines : 5 √ó 10 = 50", 
                                    "  - 4 est dans la position des centaines : 4 √ó 100 = 400",
                                    "  - 3 est dans la position des milliers : 3 √ó 1000 = 3000",
                                    "‚Ä¢ Donc 3 456 = 3000 + 400 + 50 + 6"
                                ]
                            },
                            {
                                titre: "‚úçÔ∏è √âcriture en lettres",
                                contenu: [
                                    "‚Ä¢ Les nombres s'√©crivent aussi en lettres",
                                    "‚Ä¢ R√®gles importantes :",
                                    "  - On met des traits d'union entre les dizaines et les unit√©s : vingt-cinq",
                                    "  - 'Cent' prend un 's' quand il est multipli√© : deux cents, mais deux cent cinq",
                                    "  - 'Mille' est invariable : deux mille, trois mille",
                                    "‚Ä¢ Exemples :",
                                    "  - 75 : soixante-quinze",
                                    "  - 200 : deux cents",
                                    "  - 205 : deux cent cinq",
                                    "  - 1 000 : mille",
                                    "  - 2 847 : deux mille huit cent quarante-sept"
                                ]
                            },
                            {
                                titre: "üéØ Comparer et ordonner",
                                contenu: [
                                    "‚Ä¢ Pour comparer deux nombres :",
                                    "  1. On compare d'abord le nombre de chiffres",
                                    "  2. Si le nombre de chiffres est √©gal, on compare chiffre par chiffre de gauche √† droite",
                                    "‚Ä¢ Symboles de comparaison :",
                                    "  - < signifie 'plus petit que'",
                                    "  - > signifie 'plus grand que'", 
                                    "  - = signifie '√©gal √†'",
                                    "‚Ä¢ Exemple : 1 234 < 1 245 car 3 < 4 (√† la position des dizaines)"
                                ]
                            }
                        ],
                        proprietes: [
                            "Ils sont tous positifs ou nuls (‚â• 0)",
                            "Ils n'ont pas de partie d√©cimale",
                            "Ils sont ordonn√©s : chaque nombre a un suivant unique",
                            "On peut les repr√©senter sur une demi-droite gradu√©e",
                            "Entre deux nombres entiers cons√©cutifs, il n'y a pas d'autre nombre entier",
                            "L'ensemble des nombres entiers naturels est infini"
                        ],
                        exemples: [
                            "üìä Comptage : 15 √©l√®ves dans une classe, 24 cahiers sur une table",
                            "üìÖ Calendrier : ann√©es 2025, 1998, 476 apr√®s J.-C.",
                            "üó∫Ô∏è Distances : 150 km entre deux villes, 3 km pour un jogging",
                            "üí∞ Monnaie : 25 euros, 8 pi√®ces de 2 euros",
                            "üè† Adresses : num√©ro 42 rue des √âcoles, appartement 15",
                            "üì± Technologie : 1 024 Go de stockage, 60 images par seconde"
                        ],
                        applications: "Les nombres entiers naturels sont utilis√©s partout : en sciences pour compter les atomes, en informatique pour les donn√©es, en sport pour les scores, en cuisine pour les portions..."
                    },
                    exercices: [
                        {
                            type: "exercice",
                            question: "D√©compose le nombre 5 847 selon sa valeur positionnelle",
                            reponse: "5000 + 800 + 40 + 7",
                            aide: "5 milliers + 8 centaines + 4 dizaines + 7 unit√©s"
                        },
                        {
                            type: "qcm",
                            question: "Dans le nombre 30 506, que repr√©sente le chiffre 0 dans la position des centaines ?",
                            options: [
                                "Qu'il n'y a pas de centaines",
                                "Qu'il y a 0 centaine", 
                                "Que le nombre est faux",
                                "Les r√©ponses A et B sont correctes"
                            ],
                            correct: 3,
                            explication: "Le 0 indique qu'il n'y a aucune centaine, ce qui revient au m√™me que dire qu'il y a 0 centaine."
                        }
                    ]
                },
                phase3: {
                    titre: "‚úèÔ∏è Je m'entra√Æne",
                    objectif: "Pratiquer la lecture, l'√©criture et la comparaison des nombres entiers naturels",
                    consignes: "Maintenant que tu connais la th√©orie, entra√Æne-toi avec ces exercices vari√©s !",
                    exercices: [
                        {
                            type: "exercice",
                            question: "√âcris en lettres le nombre 1 847",
                            reponse: "mille huit cent quarante-sept",
                            aide: "1000 = mille, 800 = huit cent (pas de 's' car suivi d'un autre nombre), 40 = quarante, 7 = sept. Attention aux traits d'union !"
                        },
                        {
                            type: "exercice", 
                            question: "Quel est le plus grand nombre que l'on peut √©crire avec les chiffres 3, 7, 1, 9 (chaque chiffre utilis√© une seule fois) ?",
                            reponse: "9731",
                            aide: "Pour avoir le plus grand nombre, place les chiffres dans l'ordre d√©croissant : 9, puis 7, puis 3, puis 1"
                        },
                        {
                            type: "exercice",
                            question: "Quel est le plus petit nombre que l'on peut √©crire avec les chiffres 5, 0, 8, 2 ?",
                            reponse: "2058",
                            aide: "Attention ! On ne peut pas commencer par 0. Le plus petit chiffre non nul est 2, puis on arrange le reste : 0, 5, 8"
                        },
                        {
                            type: "qcm",
                            question: "Range dans l'ordre croissant : 1 205, 1 025, 1 520, 1 250",
                            options: [
                                "1 025, 1 205, 1 250, 1 520",
                                "1 025, 1 205, 1 520, 1 250",
                                "1 205, 1 025, 1 250, 1 520",
                                "1 520, 1 250, 1 205, 1 025"
                            ],
                            correct: 0,
                            explication: "On compare chiffre par chiffre : 1 025 < 1 205 < 1 250 < 1 520"
                        },
                        {
                            type: "exercice",
                            question: "Compl√®te avec <, > ou = : 2 856 ... 2 865",
                            reponse: "<",
                            aide: "Compare chiffre par chiffre de gauche √† droite. Les milliers sont √©gaux (2=2), les centaines sont √©gales (8=8), les dizaines : 5 < 6, donc 2 856 < 2 865"
                        },
                        {
                            type: "exercice",
                            question: "√âcris en chiffres : quatre-vingt-douze mille trois cent six",
                            reponse: "92306",
                            aide: "quatre-vingt-douze mille = 92 000, trois cent = 300, six = 6. Donc 92 000 + 300 + 6 = 92 306"
                        },
                        {
                            type: "qcm",
                            question: "Combien y a-t-il de nombres entiers naturels entre 15 et 23 (15 et 23 non compris) ?",
                            options: ["6", "7", "8", "9"],
                            correct: 1,
                            explication: "Entre 15 et 23 : 16, 17, 18, 19, 20, 21, 22. Cela fait 7 nombres."
                        },
                        {
                            type: "exercice",
                            question: "Dans le nombre 506 290, quelle est la valeur du chiffre 6 ?",
                            reponse: "6000",
                            aide: "Le chiffre 6 est dans la position des milliers, sa valeur est donc 6 √ó 1000 = 6000"
                        }
                    ]
                },
                phase4: {
                    titre: "üéØ Je r√©fl√©chis sur mes apprentissages",
                    objectif: "D√©velopper une r√©flexion m√©tacognitive sur la compr√©hension des nombres entiers naturels",
                    consignes: "Cette phase t'aide √† r√©fl√©chir sur tes apprentissages et √† identifier tes strat√©gies de r√©ussite.",
                    questions: [
                        "Quelles strat√©gies utilises-tu pour comparer deux grands nombres √† 6 chiffres ?",
                        "Comment peux-tu v√©rifier que tu as bien √©crit un nombre en lettres ?",
                        "Dans quelles situations de la vie quotidienne utilises-tu les nombres entiers naturels ?",
                        "Quelle est la diff√©rence entre un chiffre et un nombre ? Peux-tu donner des exemples ?",
                        "Comment expliques-tu √† un camarade la m√©thode pour ranger des nombres dans l'ordre croissant ?",
                        "Quelles erreurs fais-tu le plus souvent avec les nombres entiers ? Comment peux-tu les √©viter ?",
                        "√Ä quoi sert la valeur positionnelle ? Pourquoi est-ce important de la comprendre ?",
                        "Comment utilises-tu les nombres entiers en dehors des math√©matiques ?"
                    ],
                    activites: [
                        {
                            type: "auto-evaluation",
                            criteres: [
                                "Je sais lire et √©crire les nombres entiers en chiffres jusqu'√† 1 million",
                                "Je sais lire et √©crire les nombres entiers en lettres en respectant l'orthographe",
                                "Je sais comparer et ranger les nombres entiers dans l'ordre croissant ou d√©croissant",
                                "Je comprends la valeur de chaque chiffre selon sa position dans un nombre",
                                "Je sais d√©composer un nombre selon sa valeur positionnelle",
                                "Je peux expliquer la diff√©rence entre un chiffre et un nombre",
                                "Je reconnais les situations o√π utiliser les nombres entiers naturels"
                            ]
                        },
                        {
                            type: "reflexion",
                            questions: [
                                "Quel exercice as-tu trouv√© le plus difficile ? Pourquoi ?",
                                "Quelle m√©thode pr√©f√®res-tu pour comparer des nombres ?",
                                "As-tu trouv√© des astuces pour retenir l'√©criture en lettres ?"
                            ]
                        }
                    ]
                }
            },
            
            'fractions': {
                titre: "Fractions",
                description: "Comprendre et manipuler les fractions simples",
                emoji: "üçï",
                phase1: {
                    titre: "üß† Que sais-je d√©j√† ?",
                    objectif: "Activer les connaissances sur les partages et les parts",
                    consignes: "Les fractions parlent de partage ! Voyons ce que tu sais d√©j√† sur ce sujet important.",
                    exercices: [
                        {
                            type: "qcm",
                            question: "Si je partage une pizza en 4 parts √©gales et que je mange 1 part, quelle fraction ai-je mang√©e ?",
                            options: ["1/4", "1/3", "4/1", "3/4"],
                            correct: 0,
                            explication: "J'ai mang√© 1 part sur 4 parts √©gales, donc 1/4 de la pizza. Le num√©rateur (1) repr√©sente les parts prises, le d√©nominateur (4) le nombre total de parts."
                        },
                        {
                            type: "qcm",
                            question: "Dans une classe de 20 √©l√®ves, 5 portent des lunettes. Quelle fraction d'√©l√®ves porte des lunettes ?",
                            options: ["5/20", "20/5", "5/25", "15/20"],
                            correct: 0,
                            explication: "5 √©l√®ves sur 20 portent des lunettes, donc la fraction est 5/20."
                        },
                        {
                            type: "qcm",
                            question: "Que repr√©sente le trait horizontal dans une fraction ?",
                            options: ["Une addition", "Une division", "Une multiplication", "Une soustraction"],
                            correct: 1,
                            explication: "Le trait de fraction repr√©sente une division : a/b signifie a divis√© par b."
                        }
                    ]
                },
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "Comprendre les fractions, leur signification et leurs repr√©sentations",
                    cours: {
                        introduction: "Les fractions sont partout ! Quand tu coupes un g√¢teau en parts, quand tu calcules une r√©duction en magasin, quand tu mesures une dur√©e... D√©couvrons ce monde fascinant !",
                        definition: "Une fraction repr√©sente une partie d'un tout. Elle s'√©crit sous la forme a/b o√π 'a' est le num√©rateur (parts prises) et 'b' est le d√©nominateur (total de parts √©gales).",
                        sections: [
                            {
                                titre: "üéØ Qu'est-ce qu'une fraction ?",
                                contenu: [
                                    "‚Ä¢ Une fraction exprime un rapport entre une partie et un tout",
                                    "‚Ä¢ Elle se note a/b (se lit 'a sur b')",
                                    "‚Ä¢ Le num√©rateur (a) : nombre de parts prises",
                                    "‚Ä¢ Le d√©nominateur (b) : nombre total de parts √©gales",
                                    "‚Ä¢ Exemple : 3/5 signifie '3 parts sur 5 parts √©gales'"
                                ]
                            },
                            {
                                titre: "üî§ Vocabulaire essentiel",
                                contenu: [
                                    "‚Ä¢ NUM√âRATEUR : le nombre du haut (combien on prend)",
                                    "‚Ä¢ D√âNOMINATEUR : le nombre du bas (en combien on partage)",
                                    "‚Ä¢ TRAIT DE FRACTION : la barre horizontale (signifie 'divis√© par')",
                                    "‚Ä¢ FRACTION PROPRE : num√©rateur < d√©nominateur (< 1)",
                                    "‚Ä¢ FRACTION IMPROPRE : num√©rateur ‚â• d√©nominateur (‚â• 1)",
                                    "‚Ä¢ FRACTION D√âCIMALE : d√©nominateur = 10, 100, 1000..."
                                ]
                            },
                            {
                                titre: "üé® Repr√©sentations des fractions",
                                contenu: [
                                    "1Ô∏è‚É£ REPR√âSENTATION GRAPHIQUE :",
                                    "‚Ä¢ Disques, rectangles, bandes divis√©s en parts √©gales",
                                    "‚Ä¢ On colorie ou hachure les parts prises",
                                    "‚Ä¢ Exemple : 2/3 = disque divis√© en 3, 2 parts colori√©es",
                                    "",
                                    "2Ô∏è‚É£ REPR√âSENTATION SUR LA DROITE NUM√âRIQUE :",
                                    "‚Ä¢ Chaque fraction correspond √† un point sur la droite",
                                    "‚Ä¢ Entre 0 et 1, puis 1 et 2, etc.",
                                    "‚Ä¢ Exemple : 1/2 se place au milieu entre 0 et 1",
                                    "",
                                    "3Ô∏è‚É£ REPR√âSENTATION D√âCIMALE :",
                                    "‚Ä¢ Certaines fractions s'√©crivent avec une virgule",
                                    "‚Ä¢ 1/2 = 0,5  ;  1/4 = 0,25  ;  3/4 = 0,75"
                                ]
                            },
                            {
                                titre: "‚öñÔ∏è Fractions √©gales (√©quivalentes)",
                                contenu: [
                                    "‚Ä¢ Diff√©rentes fractions peuvent repr√©senter la m√™me quantit√©",
                                    "‚Ä¢ Exemple : 1/2 = 2/4 = 3/6 = 4/8 = 50/100",
                                    "‚Ä¢ Pour obtenir une fraction √©gale :",
                                    "  - On multiplie num√©rateur ET d√©nominateur par le m√™me nombre",
                                    "  - Ou on divise num√©rateur ET d√©nominateur par le m√™me nombre",
                                    "‚Ä¢ Exemple : 2/3 = (2√ó4)/(3√ó4) = 8/12"
                                ]
                            },
                            {
                                titre: "üî¢ Fractions et nombres entiers",
                                contenu: [
                                    "‚Ä¢ Tout nombre entier peut s'√©crire en fraction :",
                                    "  - 1 = 1/1 = 2/2 = 3/3 = 10/10",
                                    "  - 2 = 2/1 = 4/2 = 6/3 = 20/10",
                                    "  - 5 = 5/1 = 10/2 = 15/3",
                                    "‚Ä¢ Une fraction avec num√©rateur = d√©nominateur vaut 1",
                                    "‚Ä¢ Si num√©rateur = 0, la fraction vaut 0",
                                    "‚Ä¢ Le d√©nominateur ne peut JAMAIS √™tre 0 !"
                                ]
                            }
                        ],
                        proprietes: [
                            "Le num√©rateur indique combien de parts on prend",
                            "Le d√©nominateur indique en combien de parts √©gales on divise le tout", 
                            "Une fraction peut repr√©senter un nombre plus petit, √©gal ou plus grand que 1",
                            "Deux fractions sont √©gales si elles repr√©sentent la m√™me quantit√©",
                            "Pour multiplier num√©rateur et d√©nominateur par le m√™me nombre, la fraction ne change pas",
                            "Le trait de fraction signifie 'divis√© par'",
                            "Le d√©nominateur ne peut jamais √™tre √©gal √† z√©ro"
                        ],
                        exemples: [
                            "üçï Cuisine : 3/4 de pizza, 1/2 litre de lait, 2/3 de tasse de farine",
                            "‚è∞ Temps : 1/4 d'heure = 15 minutes, 3/4 d'heure = 45 minutes",
                            "üí∞ R√©ductions : 1/2 prix = 50% de r√©duction, 1/3 de r√©duction",
                            "üìê Mesures : 1/2 m√®tre = 50 cm, 3/4 de kg = 750 g",
                            "üéµ Musique : 1/4 de soupir, 1/2 temps, 3/4 de mesure",
                            "üèÉ Sport : 3/4 du parcours, 2/3 du temps de course"
                        ],
                        applications: "Les fractions sont essentielles en cuisine (recettes), en musique (rythmes), en sport (performances), en architecture (proportions), en commerce (r√©ductions)..."
                    },
                    exercices: [
                        {
                            type: "qcm",
                            question: "Dans la fraction 7/9, quel est le num√©rateur et quel est le d√©nominateur ?",
                            options: [
                                "Num√©rateur : 7, D√©nominateur : 9",
                                "Num√©rateur : 9, D√©nominateur : 7",
                                "Num√©rateur : 7, D√©nominateur : 16",
                                "Num√©rateur : 16, D√©nominateur : 7"
                            ],
                            correct: 0,
                            explication: "Dans une fraction a/b, 'a' (le nombre du haut) est le num√©rateur et 'b' (le nombre du bas) est le d√©nominateur."
                        },
                        {
                            type: "exercice",
                            question: "Quelle fraction repr√©sente la partie gris√©e si un rectangle est divis√© en 8 parts √©gales et que 5 parts sont gris√©es ?",
                            reponse: "5/8",
                            aide: "Num√©rateur = parties gris√©es (5), D√©nominateur = total des parties (8)"
                        }
                    ]
                },
                phase3: {
                    titre: "‚úèÔ∏è Je m'entra√Æne",
                    objectif: "Pratiquer la lecture, l'√©criture et la repr√©sentation des fractions",
                    consignes: "Maintenant, entra√Æne-toi avec ces exercices pour bien ma√Ætriser les fractions !",
                    exercices: [
                        {
                            type: "exercice",
                            question: "√âcris la fraction qui repr√©sente 3 parts sur 7 parts √©gales",
                            reponse: "3/7",
                            aide: "Num√©rateur = parts prises (3), d√©nominateur = total de parts (7)"
                        },
                        {
                            type: "qcm",
                            question: "Quelle fraction est √©gale √† 1/2 ?",
                            options: ["2/4", "1/3", "3/4", "1/4"],
                            correct: 0,
                            explication: "2/4 = 1/2 car si on divise le num√©rateur et le d√©nominateur par 2, on obtient 1/2. C'est une fraction √©quivalente."
                        },
                        {
                            type: "qcm",
                            question: "Parmi ces fractions, laquelle est plus grande que 1 ?",
                            options: ["3/4", "7/8", "5/3", "2/5"],
                            correct: 2,
                            explication: "5/3 est plus grand que 1 car le num√©rateur (5) est plus grand que le d√©nominateur (3). Cela repr√©sente plus qu'un tout complet."
                        },
                        {
                            type: "exercice",
                            question: "Dans une bo√Æte de 12 chocolats, j'en mange 8. Quelle fraction ai-je mang√©e ?",
                            reponse: "8/12",
                            aide: "J'ai mang√© 8 chocolats sur 12 au total, donc 8/12"
                        },
                        {
                            type: "qcm",
                            question: "Quelle fraction repr√©sente un g√¢teau entier ?",
                            options: ["1/1", "2/2", "5/5", "Toutes ces r√©ponses"],
                            correct: 3,
                            explication: "Toutes ces fractions valent 1 car le num√©rateur √©gale le d√©nominateur. Elles repr√©sentent toutes un tout complet."
                        },
                        {
                            type: "exercice",
                            question: "Compl√®te : 2/3 = ?/6",
                            reponse: "4",
                            aide: "Pour passer de 3 √† 6, on multiplie par 2. Donc il faut aussi multiplier 2 par 2 : 2√ó2 = 4"
                        },
                        {
                            type: "qcm",
                            question: "Quelle fraction est la plus petite ?",
                            options: ["2/3", "3/4", "1/2", "5/6"],
                            correct: 2,
                            explication: "1/2 = 0,5 est la plus petite. Pour comparer : 2/3 ‚âà 0,67 ; 3/4 = 0,75 ; 5/6 ‚âà 0,83"
                        },
                        {
                            type: "exercice",
                            question: "Si 1/4 d'heure repr√©sente 15 minutes, combien de minutes repr√©sentent 3/4 d'heure ?",
                            reponse: "45",
                            aide: "Si 1/4 d'heure = 15 minutes, alors 3/4 d'heure = 3 √ó 15 = 45 minutes"
                        }
                    ]
                },
                phase4: {
                    titre: "üéØ Je r√©fl√©chis sur mes apprentissages",
                    objectif: "R√©fl√©chir sur la compr√©hension des fractions et leurs applications",
                    consignes: "Les fractions sont un concept important ! Prends le temps de r√©fl√©chir √† ce que tu as appris.",
                    questions: [
                        "Comment expliques-tu ce qu'est une fraction √† quelqu'un qui ne conna√Æt pas ce concept ?",
                        "Quand utilises-tu des fractions dans la vie quotidienne ? Peux-tu donner 5 exemples concrets ?",
                        "Comment peux-tu v√©rifier qu'une fraction est correcte dans un probl√®me de partage ?",
                        "Quelle diff√©rence fais-tu entre 1/2 et 2/4 ? Sont-elles √©gales ? Pourquoi ?",
                        "Comment fais-tu pour comparer deux fractions ? Quelle est ta strat√©gie ?",
                        "Quelles erreurs fais-tu le plus souvent avec les fractions ? Comment peux-tu les √©viter ?",
                        "√Ä ton avis, pourquoi est-il important de comprendre les fractions ?",
                        "Comment les fractions t'aident-elles √† mieux comprendre la division ?"
                    ],
                    activites: [
                        {
                            type: "auto-evaluation",
                            criteres: [
                                "Je comprends ce qu'est une fraction et ce qu'elle repr√©sente",
                                "Je sais identifier le num√©rateur et le d√©nominateur d'une fraction",
                                "Je sais repr√©senter une fraction par un dessin ou un sch√©ma",
                                "Je reconnais les fractions √©quivalentes simples (1/2 = 2/4)",
                                "Je sais comparer des fractions simples avec 1",
                                "Je peux donner des exemples d'utilisation des fractions dans la vie courante",
                                "Je comprends le lien entre fractions et division",
                                "Je sais r√©soudre des probl√®mes simples avec des fractions"
                            ]
                        },
                        {
                            type: "reflexion",
                            questions: [
                                "Quel type d'exercice sur les fractions pr√©f√®res-tu ? Pourquoi ?",
                                "As-tu trouv√© difficile de comprendre que 1/2 = 2/4 ? Comment l'expliques-tu maintenant ?",
                                "Quelle m√©thode utilises-tu pour retenir qu'est-ce que le num√©rateur et le d√©nominateur ?"
                            ]
                        },
                        {
                            type: "projet",
                            description: "Cr√©e une recette de cuisine en utilisant des fractions (1/2 tasse de farine, 1/4 de litre de lait, etc.) et explique pourquoi les fractions sont utiles en cuisine."
                        }
                    ]
                }
            },

            'nombres-decimaux': {
                titre: "Nombres d√©cimaux",
                description: "D√©couvrir et manipuler les nombres d√©cimaux",
                emoji: "üéØ",
                phase1: {
                    titre: "üß† Que sais-je d√©j√† ?",
                    objectif: "Activer les connaissances sur les nombres avec virgule",
                    exercices: [
                        {
                            type: "qcm",
                            question: "Quel est le plus grand nombre d√©cimal ?",
                            options: ["1,45", "1,5", "1,055", "1,6"],
                            correct: 3,
                            explication: "1,6 est le plus grand car 1,6 > 1,5 > 1,45 > 1,055. Pour comparer, on regarde d'abord la partie enti√®re, puis les dixi√®mes, puis les centi√®mes..."
                        },
                        {
                            type: "qcm",
                            question: "Dans le nombre 12,47, que repr√©sente le chiffre 7 ?",
                            options: ["7 dixi√®mes", "7 centi√®mes", "7 milli√®mes", "7 unit√©s"],
                            correct: 1,
                            explication: "Le 7 est en position des centi√®mes dans 12,47"
                        }
                    ]
                },
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "Comprendre les nombres d√©cimaux et leur √©criture",
                    cours: {
                        introduction: "Les nombres d√©cimaux nous entourent : prix (12,50 ‚Ç¨), mesures (1,75 m), temp√©rature (18,5¬∞C)... Ils permettent d'exprimer des quantit√©s plus pr√©cises que les nombres entiers !",
                        definition: "Un nombre d√©cimal est un nombre qui peut avoir une partie enti√®re et une partie d√©cimale, s√©par√©es par une virgule. Il permet d'exprimer des quantit√©s non enti√®res avec pr√©cision.",
                        sections: [
                            {
                                titre: "üîç Structure d'un nombre d√©cimal",
                                contenu: [
                                    "‚Ä¢ Partie enti√®re : √† gauche de la virgule (unit√©s, dizaines, centaines...)",
                                    "‚Ä¢ Virgule : s√©pare la partie enti√®re de la partie d√©cimale",
                                    "‚Ä¢ Partie d√©cimale : √† droite de la virgule (dixi√®mes, centi√®mes, milli√®mes...)",
                                    "‚Ä¢ Exemple avec 145,327 :",
                                    "  - Partie enti√®re : 145",
                                    "  - Partie d√©cimale : 327 (3 dixi√®mes, 2 centi√®mes, 7 milli√®mes)"
                                ]
                            },
                            {
                                titre: "üìä Valeur positionnelle d√©cimale",
                                contenu: [
                                    "‚Ä¢ √Ä droite de la virgule, chaque position vaut 10 fois moins que la pr√©c√©dente",
                                    "‚Ä¢ Ordre des positions d√©cimales :",
                                    "  - 1er rang : dixi√®mes (0,1)",
                                    "  - 2e rang : centi√®mes (0,01)", 
                                    "  - 3e rang : milli√®mes (0,001)",
                                    "  - 4e rang : dix-milli√®mes (0,0001)...",
                                    "‚Ä¢ Exemple avec 7,438 :",
                                    "  - 4 dixi√®mes = 4 √ó 0,1 = 0,4",
                                    "  - 3 centi√®mes = 3 √ó 0,01 = 0,03",
                                    "  - 8 milli√®mes = 8 √ó 0,001 = 0,008",
                                    "‚Ä¢ Donc 7,438 = 7 + 0,4 + 0,03 + 0,008"
                                ]
                            },
                            {
                                titre: "‚úèÔ∏è √âcriture et lecture",
                                contenu: [
                                    "‚Ä¢ √âcriture d√©cimale : avec la virgule (12,5)",
                                    "‚Ä¢ √âcriture fractionnaire : avec des dixi√®mes, centi√®mes... (12,5 = 125/10)",
                                    "‚Ä¢ Lecture : 'douze virgule cinq' ou 'douze unit√©s et cinq dixi√®mes'",
                                    "‚Ä¢ Attention aux z√©ros :",
                                    "  - 12,50 = 12,5 (z√©ros √† droite inutiles)",
                                    "  - 12,05 ‚â† 12,5 (z√©ro entre chiffres significatif)"
                                ]
                            },
                            {
                                titre: "‚öñÔ∏è Comparaison de nombres d√©cimaux",
                                contenu: [
                                    "‚Ä¢ M√©thode pour comparer :",
                                    "  1. Comparer les parties enti√®res",
                                    "  2. Si √©gales, comparer les dixi√®mes",
                                    "  3. Si √©gaux, comparer les centi√®mes, etc.",
                                    "‚Ä¢ Exemples :",
                                    "  - 12,7 > 12,65 (car 7 dixi√®mes > 6 dixi√®mes)",
                                    "  - 8,40 = 8,4 (z√©ros √† droite)",
                                    "  - 0,9 > 0,789 (car 9 dixi√®mes > 7 dixi√®mes)"
                                ]
                            }
                        ],
                        proprietes: [
                            "La partie enti√®re est √† gauche de la virgule",
                            "La partie d√©cimale est √† droite de la virgule",
                            "Chaque position d√©cimale a une valeur : dixi√®mes, centi√®mes, milli√®mes...",
                            "Les z√©ros √† droite de la partie d√©cimale ne changent pas la valeur",
                            "Pour comparer, on examine chiffre par chiffre de gauche √† droite",
                            "Un nombre entier peut s'√©crire avec une virgule : 5 = 5,0 = 5,00"
                        ],
                        exemples: [
                            "üí∞ Prix : 15,99 ‚Ç¨ ; 3,50 ‚Ç¨ ; 125,00 ‚Ç¨",
                            "üìè Mesures : 1,75 m ; 2,5 km ; 0,5 kg",
                            "üå°Ô∏è Temp√©rature : 18,5¬∞C ; 37,2¬∞C ; -5,8¬∞C",
                            "‚è±Ô∏è Temps : 12,5 secondes ; 1,25 minute",
                            "üìä Notes : 15,5/20 ; 12,75/20 ; 18,25/20",
                            "‚õΩ Carburant : 1,45 ‚Ç¨ le litre ; 35,8 litres"
                        ]
                    },
                    exercices: [
                        {
                            type: "exercice",
                            question: "Dans le nombre 56,789, quelle est la valeur du chiffre 8 ?",
                            reponse: "0,08",
                            aide: "Le 8 est en position des centi√®mes, donc sa valeur est 8 centi√®mes = 0,08"
                        }
                    ]
                },
                phase3: {
                    titre: "‚úèÔ∏è Je m'entra√Æne",
                    objectif: "Pratiquer la lecture, l'√©criture et la comparaison des nombres d√©cimaux",
                    exercices: [
                        {
                            type: "exercice",
                            question: "√âcris en chiffres : trois unit√©s et quatre dixi√®mes",
                            reponse: "3,4",
                            aide: "3 unit√©s = 3, 4 dixi√®mes = 0,4, donc 3 + 0,4 = 3,4"
                        },
                        {
                            type: "qcm",
                            question: "Range dans l'ordre croissant : 2,8 ; 2,75 ; 2,9 ; 2,05",
                            options: [
                                "2,05 ; 2,75 ; 2,8 ; 2,9",
                                "2,9 ; 2,8 ; 2,75 ; 2,05",
                                "2,75 ; 2,05 ; 2,8 ; 2,9",
                                "2,05 ; 2,8 ; 2,75 ; 2,9"
                            ],
                            correct: 0,
                            explication: "On compare les dixi√®mes : 0 < 7 < 8 < 9, donc 2,05 < 2,75 < 2,8 < 2,9"
                        }
                    ]
                },
                phase4: {
                    titre: "üéØ Je r√©fl√©chis sur mes apprentissages",
                    objectif: "R√©fl√©chir sur la compr√©hension des nombres d√©cimaux",
                    questions: [
                        "Comment diff√©rencies-tu un nombre entier d'un nombre d√©cimal ?",
                        "Dans quelles situations utilises-tu des nombres d√©cimaux ?",
                        "Pourquoi la virgule est-elle importante dans un nombre d√©cimal ?"
                    ],
                    activites: [
                        {
                            type: "auto-evaluation",
                            criteres: [
                                "Je reconnais un nombre d√©cimal",
                                "Je sais lire et √©crire des nombres d√©cimaux",
                                "Je comprends la valeur positionnelle des chiffres apr√®s la virgule",
                                "Je sais comparer des nombres d√©cimaux"
                            ]
                        }
                    ]
                }
            },

            'addition-soustraction': {
                titre: "Addition et soustraction",
                description: "Ma√Ætriser les op√©rations de base",
                emoji: "‚ûï‚ûñ",
                phase1: {
                    titre: "üß† Que sais-je d√©j√† ?",
                    objectif: "R√©viser les connaissances sur l'addition et la soustraction",
                    exercices: [
                        {
                            type: "exercice",
                            question: "Calcule : 245 + 138",
                            reponse: "383",
                            aide: "Pose l'addition en colonnes : unit√©s sous unit√©s, dizaines sous dizaines..."
                        },
                        {
                            type: "qcm",
                            question: "Dans une soustraction, comment appelle-t-on le r√©sultat ?",
                            options: ["La somme", "La diff√©rence", "Le produit", "Le quotient"],
                            correct: 1,
                            explication: "Le r√©sultat d'une soustraction s'appelle la diff√©rence."
                        }
                    ]
                },
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "Comprendre les techniques d'addition et de soustraction",
                    cours: {
                        definition: "L'addition permet de r√©unir des quantit√©s. La soustraction permet de retirer une quantit√© ou de calculer un √©cart.",
                        proprietes: [
                            "Addition : a + b = somme",
                            "Soustraction : a - b = diff√©rence",
                            "L'addition est commutative : a + b = b + a",
                            "La soustraction n'est pas commutative : a - b ‚â† b - a"
                        ],
                        sections: [
                            {
                                titre: "‚ûï L'addition",
                                contenu: [
                                    "‚Ä¢ Permet de r√©unir, ajouter, augmenter",
                                    "‚Ä¢ Propri√©t√© de commutativit√© : 7 + 3 = 3 + 7",
                                    "‚Ä¢ Technique : poser en colonnes, commencer par les unit√©s",
                                    "‚Ä¢ Avec retenue si la somme d√©passe 9"
                                ]
                            },
                            {
                                titre: "‚ûñ La soustraction", 
                                contenu: [
                                    "‚Ä¢ Permet de retirer, diminuer, calculer un √©cart",
                                    "‚Ä¢ Attention : 8 - 3 ‚â† 3 - 8",
                                    "‚Ä¢ Technique : poser en colonnes, parfois avec emprunt"
                                ]
                            }
                        ]
                    }
                },
                phase3: {
                    titre: "‚úèÔ∏è Je m'entra√Æne",
                    objectif: "Pratiquer les calculs d'addition et de soustraction",
                    exercices: [
                        {
                            type: "exercice",
                            question: "Calcule : 456 - 189",
                            reponse: "267",
                            aide: "Attention aux emprunts ! 6-9 impossible, emprunte 1 dizaine"
                        },
                        {
                            type: "exercice",
                            question: "Calcule : 1 247 + 856",
                            reponse: "2103",
                            aide: "Pose l'addition : 7+6=13, je pose 3 et retiens 1..."
                        }
                    ]
                },
                phase4: {
                    titre: "üéØ Je r√©fl√©chis sur mes apprentissages",
                    objectif: "R√©fl√©chir sur l'usage des op√©rations",
                    questions: [
                        "Quand utilises-tu l'addition et la soustraction au quotidien ?",
                        "Comment fais-tu pour v√©rifier tes calculs ?",
                        "Quelle diff√©rence y a-t-il entre addition et soustraction ?"
                    ],
                    activites: [
                        {
                            type: "auto-evaluation",
                            criteres: [
                                "Je sais poser une addition en colonnes",
                                "Je sais g√©rer les retenues",
                                "Je sais poser une soustraction avec emprunt",
                                "Je sais v√©rifier mes calculs"
                            ]
                        }
                    ]
                }
            },

            'multiplication': {
                titre: "Multiplication",
                description: "Comprendre et calculer des multiplications",
                emoji: "‚úñÔ∏è",
                phase1: {
                    titre: "üß† Que sais-je d√©j√† ?",
                    objectif: "R√©viser les tables de multiplication",
                    exercices: [
                        {
                            type: "qcm",
                            question: "Combien font 7 √ó 8 ?",
                            options: ["54", "56", "64", "48"],
                            correct: 1,
                            explication: "7 √ó 8 = 56. C'est important de conna√Ætre les tables !"
                        },
                        {
                            type: "exercice",
                            question: "Calcule : 6 √ó 9",
                            reponse: "54",
                            aide: "Tables de 6 ou de 9 : 6 √ó 9 = 9 √ó 6 = 54"
                        }
                    ]
                },
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "Ma√Ætriser la multiplication",
                    cours: {
                        definition: "La multiplication permet de calculer rapidement des additions r√©p√©t√©es. Elle repr√©sente aussi l'aire d'un rectangle.",
                        proprietes: [
                            "a √ó b = produit",
                            "La multiplication est commutative : a √ó b = b √ó a",
                            "Tables de multiplication de 1 √† 10",
                            "Multiplier par 10, 100, 1000 : on ajoute des z√©ros"
                        ],
                        sections: [
                            {
                                titre: "üî¢ Tables de multiplication",
                                contenu: [
                                    "‚Ä¢ √Ä conna√Ætre par c≈ìur de 1 √† 10",
                                    "‚Ä¢ Strat√©gies pour retenir : 9√ó6 = 54 (5+4=9)",
                                    "‚Ä¢ Propri√©t√© de commutativit√© : 7√ó8 = 8√ó7"
                                ]
                            }
                        ]
                    }
                },
                phase3: {
                    titre: "‚úèÔ∏è Je m'entra√Æne",
                    objectif: "Pratiquer la multiplication",
                    exercices: [
                        {
                            type: "exercice",
                            question: "Calcule : 25 √ó 4",
                            reponse: "100",
                            aide: "25 √ó 4 = 25 √ó 2 √ó 2 = 50 √ó 2 = 100"
                        },
                        {
                            type: "qcm",
                            question: "Que vaut 123 √ó 10 ?",
                            options: ["123", "1230", "12300", "133"],
                            correct: 1,
                            explication: "Multiplier par 10, on ajoute un z√©ro : 123 √ó 10 = 1230"
                        }
                    ]
                },
                phase4: {
                    titre: "üéØ Je r√©fl√©chis sur mes apprentissages",
                    objectif: "Comprendre l'utilit√© de la multiplication",
                    questions: [
                        "√Ä quoi sert la multiplication dans la vie ?",
                        "Comment retiens-tu les tables de multiplication ?",
                        "Quel lien y a-t-il entre multiplication et addition ?"
                    ],
                    activites: [
                        {
                            type: "auto-evaluation",
                            criteres: [
                                "Je connais mes tables de multiplication",
                                "Je sais poser une multiplication",
                                "Je comprends le lien avec l'addition r√©p√©t√©e",
                                "Je sais multiplier par 10, 100, 1000"
                            ]
                        }
                    ]
                }
            },

            'division': {
                titre: "Division euclidienne",
                description: "D√©couvrir la division euclidienne",
                emoji: "‚ûó",
                phase1: {
                    titre: "üß† Que sais-je d√©j√† ?",
                    objectif: "R√©viser les connaissances sur la division",
                    exercices: [
                        {
                            type: "qcm",
                            question: "Dans la division 15 √∑ 3 = 5, comment appelle-t-on le nombre 5 ?",
                            options: ["Le dividende", "Le diviseur", "Le quotient", "Le reste"],
                            correct: 2,
                            explication: "Dans une division, le r√©sultat s'appelle le quotient."
                        }
                    ]
                },
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "Comprendre la division euclidienne",
                    cours: {
                        introduction: "La division permet de partager √©quitablement ou de regrouper. C'est l'op√©ration inverse de la multiplication !",
                        definition: "La division euclidienne permet de partager √©quitablement ou de grouper. Elle donne un quotient et parfois un reste.",
                        sections: [
                            {
                                titre: "üéØ Vocabulaire de la division",
                                contenu: [
                                    "‚Ä¢ DIVIDENDE : le nombre que l'on divise",
                                    "‚Ä¢ DIVISEUR : le nombre par lequel on divise",
                                    "‚Ä¢ QUOTIENT : le r√©sultat de la division",
                                    "‚Ä¢ RESTE : ce qui reste quand la division n'est pas exacte",
                                    "‚Ä¢ Exemple : 17 √∑ 3 = 5 reste 2"
                                ]
                            },
                            {
                                titre: "üîç Deux sens de la division",
                                contenu: [
                                    "1Ô∏è‚É£ PARTAGE : diviser en parts √©gales",
                                    "‚Ä¢ 20 bonbons √† partager entre 4 enfants = 20 √∑ 4 = 5 bonbons chacun",
                                    "",
                                    "2Ô∏è‚É£ GROUPEMENT : faire des groupes de m√™me taille",
                                    "‚Ä¢ 20 bonbons en paquets de 4 = 20 √∑ 4 = 5 paquets"
                                ]
                            }
                        ],
                        proprietes: [
                            "dividende √∑ diviseur = quotient (reste)",
                            "V√©rification : quotient √ó diviseur + reste = dividende",
                            "Le reste est toujours plus petit que le diviseur",
                            "Si le reste = 0, la division est exacte"
                        ],
                        exemples: [
                            "üìö Partage : 24 livres pour 6 √©l√®ves = 4 livres par √©l√®ve",
                            "üç´ Groupement : 30 chocolats en bo√Ætes de 6 = 5 bo√Ætes",
                            "‚è∞ Conversion : 125 minutes √∑ 60 = 2 heures et 5 minutes"
                        ]
                    }
                },
                phase3: {
                    titre: "‚úèÔ∏è Je m'entra√Æne",
                    objectif: "Pratiquer la division euclidienne",
                    exercices: [
                        {
                            type: "exercice",
                            question: "Calcule : 84 √∑ 7",
                            reponse: "12",
                            aide: "Cherche combien de fois 7 va dans 84. 7 √ó 12 = 84"
                        },
                        {
                            type: "exercice",
                            question: "Dans la division 45 √∑ 6, quel est le quotient et le reste ?",
                            reponse: "7 reste 3",
                            aide: "45 √∑ 6 = 7 reste 3, car 7 √ó 6 + 3 = 42 + 3 = 45"
                        }
                    ]
                },
                phase4: {
                    titre: "üéØ Je r√©fl√©chis sur mes apprentissages",
                    objectif: "Comprendre l'utilit√© de la division",
                    questions: [
                        "Dans quelles situations utilises-tu la division ?",
                        "Comment v√©rifies-tu qu'une division est correcte ?",
                        "Quel lien y a-t-il entre division et multiplication ?"
                    ],
                    activites: [
                        {
                            type: "auto-evaluation",
                            criteres: [
                                "Je comprends le vocabulaire de la division",
                                "Je sais faire des divisions simples",
                                "Je sais v√©rifier mes divisions",
                                "Je reconnais les situations de partage et de groupement"
                            ]
                        }
                    ]
                }
            },

            'geometrie': {
                titre: "G√©om√©trie plane",
                description: "Figures planes et constructions simples",
                emoji: "üìê",
                phase1: {
                    titre: "üß† Que sais-je d√©j√† ?",
                    objectif: "R√©viser les connaissances en g√©om√©trie",
                    exercices: [
                        {
                            type: "qcm",
                            question: "Combien de c√¥t√©s a un triangle ?",
                            options: ["2", "3", "4", "5"],
                            correct: 1,
                            explication: "Un triangle a toujours 3 c√¥t√©s et 3 sommets."
                        }
                    ]
                },
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "D√©couvrir les figures g√©om√©triques de base",
                    cours: {
                        introduction: "La g√©om√©trie nous entoure ! Les formes des b√¢timents, des objets, de la nature... Apprenons √† les reconna√Ætre et les construire !",
                        definition: "La g√©om√©trie plane √©tudie les figures √† deux dimensions : leurs propri√©t√©s, leurs constructions et leurs mesures.",
                        sections: [
                            {
                                titre: "üìç Points, droites, segments",
                                contenu: [
                                    "‚Ä¢ POINT : position dans l'espace (not√© A, B, C...)",
                                    "‚Ä¢ DROITE : ligne infinie dans les deux sens",
                                    "‚Ä¢ SEGMENT : portion de droite entre deux points",
                                    "‚Ä¢ DEMI-DROITE : portion de droite limit√©e d'un c√¥t√©"
                                ]
                            },
                            {
                                titre: "üî∫ Les triangles",
                                contenu: [
                                    "‚Ä¢ Figure √† 3 c√¥t√©s et 3 sommets",
                                    "‚Ä¢ Triangle √©quilat√©ral : 3 c√¥t√©s √©gaux",
                                    "‚Ä¢ Triangle isoc√®le : 2 c√¥t√©s √©gaux",
                                    "‚Ä¢ Triangle rectangle : 1 angle droit (90¬∞)"
                                ]
                            },
                            {
                                titre: "‚¨ú Les quadrilat√®res",
                                contenu: [
                                    "‚Ä¢ CARR√â : 4 c√¥t√©s √©gaux, 4 angles droits",
                                    "‚Ä¢ RECTANGLE : 4 angles droits, c√¥t√©s oppos√©s √©gaux",
                                    "‚Ä¢ LOSANGE : 4 c√¥t√©s √©gaux",
                                    "‚Ä¢ PARALL√âLOGRAMME : c√¥t√©s oppos√©s parall√®les et √©gaux"
                                ]
                            }
                        ],
                        proprietes: [
                            "Point, droite, segment sont les bases de la g√©om√©trie",
                            "Les figures planes ont des propri√©t√©s sp√©cifiques",
                            "On utilise des instruments : r√®gle, √©querre, compas",
                            "La construction doit √™tre pr√©cise et soign√©e"
                        ],
                        exemples: [
                            "üè† Architecture : formes des fen√™tres, toits triangulaires",
                            "üé® Art : compositions g√©om√©triques, mosa√Øques",
                            "üåü Nature : flocons de neige, nids d'abeilles hexagonaux",
                            "üì± Technologie : √©crans rectangulaires, logos triangulaires"
                        ]
                    }
                },
                phase3: {
                    titre: "‚úèÔ∏è Je m'entra√Æne",
                    objectif: "Reconna√Ætre et construire des figures",
                    exercices: [
                        {
                            type: "qcm",
                            question: "Quelle figure a 4 c√¥t√©s √©gaux et 4 angles droits ?",
                            options: ["Rectangle", "Losange", "Carr√©", "Triangle"],
                            correct: 2,
                            explication: "Le carr√© a 4 c√¥t√©s √©gaux ET 4 angles droits."
                        }
                    ]
                },
                phase4: {
                    titre: "üéØ Je r√©fl√©chis sur mes apprentissages",
                    objectif: "Comprendre l'importance de la g√©om√©trie",
                    questions: [
                        "O√π vois-tu de la g√©om√©trie autour de toi ?",
                        "Pourquoi est-il important d'√™tre pr√©cis en g√©om√©trie ?",
                        "Quels instruments utilises-tu pour construire ?"
                    ],
                    activites: [
                        {
                            type: "auto-evaluation",
                            criteres: [
                                "Je reconnais les figures g√©om√©triques de base",
                                "Je connais les propri√©t√©s des triangles et quadrilat√®res",
                                "Je sais utiliser les instruments de g√©om√©trie",
                                "Je peux construire des figures simples"
                            ]
                        }
                    ]
                }
            },

            'proportionnalite': {
                titre: "Proportionnalit√©",
                description: "D√©couvrir les relations de proportionnalit√©",
                emoji: "‚öñÔ∏è",
                phase1: {
                    titre: "üß† Que sais-je d√©j√† ?",
                    objectif: "R√©viser les situations de proportionnalit√©",
                    exercices: [
                        {
                            type: "qcm",
                            question: "Si 2 kg de pommes co√ªtent 4 ‚Ç¨, combien co√ªtent 4 kg ?",
                            options: ["6 ‚Ç¨", "8 ‚Ç¨", "10 ‚Ç¨", "12 ‚Ç¨"],
                            correct: 1,
                            explication: "Si 2 kg = 4 ‚Ç¨, alors 4 kg = 2 √ó 4 ‚Ç¨ = 8 ‚Ç¨"
                        }
                    ]
                },
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "Comprendre la proportionnalit√©",
                    cours: {
                        introduction: "La proportionnalit√© est partout : vitesse et distance, prix et quantit√©, recettes de cuisine... Apprenons √† la reconna√Ætre !",
                        definition: "Deux grandeurs sont proportionnelles si l'une s'obtient en multipliant l'autre par un nombre constant (coefficient de proportionnalit√©).",
                        sections: [
                            {
                                titre: "üéØ Reconna√Ætre la proportionnalit√©",
                                contenu: [
                                    "‚Ä¢ Si on multiplie une quantit√© par 2, l'autre aussi",
                                    "‚Ä¢ Si on multiplie une quantit√© par 3, l'autre aussi",
                                    "‚Ä¢ Le rapport reste constant",
                                    "‚Ä¢ Exemple : 1 kg = 2 ‚Ç¨, 2 kg = 4 ‚Ç¨, 3 kg = 6 ‚Ç¨"
                                ]
                            },
                            {
                                titre: "üìä Tableaux de proportionnalit√©",
                                contenu: [
                                    "‚Ä¢ Organiser les donn√©es en tableau",
                                    "‚Ä¢ V√©rifier si les rapports sont √©gaux",
                                    "‚Ä¢ Trouver le coefficient de proportionnalit√©",
                                    "‚Ä¢ Compl√©ter le tableau"
                                ]
                            }
                        ],
                        proprietes: [
                            "Coefficient de proportionnalit√© constant",
                            "Tableaux de proportionnalit√©",
                            "R√®gle de trois pour r√©soudre des probl√®mes",
                            "Repr√©sentation graphique : droite passant par l'origine"
                        ],
                        exemples: [
                            "üõí Achats : prix proportionnel au poids",
                            "üöó Vitesse : distance proportionnelle au temps",
                            "üë®‚Äçüç≥ Cuisine : ingr√©dients proportionnels au nombre de personnes",
                            "üí∞ Change : euros proportionnels aux dollars"
                        ]
                    }
                },
                phase3: {
                    titre: "‚úèÔ∏è Je m'entra√Æne",
                    objectif: "R√©soudre des probl√®mes de proportionnalit√©",
                    exercices: [
                        {
                            type: "exercice",
                            question: "Si 3 croissants co√ªtent 4,50 ‚Ç¨, combien co√ªtent 5 croissants ?",
                            reponse: "7,50",
                            aide: "3 croissants = 4,50 ‚Ç¨, donc 1 croissant = 1,50 ‚Ç¨, donc 5 croissants = 5 √ó 1,50 = 7,50 ‚Ç¨"
                        }
                    ]
                },
                phase4: {
                    titre: "üéØ Je r√©fl√©chis sur mes apprentissages",
                    objectif: "Comprendre l'utilit√© de la proportionnalit√©",
                    questions: [
                        "O√π utilises-tu la proportionnalit√© dans la vie ?",
                        "Comment reconnais-tu une situation de proportionnalit√© ?",
                        "Quelle m√©thode pr√©f√®res-tu pour r√©soudre ces probl√®mes ?"
                    ],
                    activites: [
                        {
                            type: "auto-evaluation",
                            criteres: [
                                "Je reconnais une situation de proportionnalit√©",
                                "Je sais compl√©ter un tableau de proportionnalit√©",
                                "Je peux r√©soudre des probl√®mes avec la r√®gle de trois",
                                "Je comprends le coefficient de proportionnalit√©"
                            ]
                        }
                    ]
                }
            },

            'angles': {
                titre: "Les angles",
                description: "D√©couvrir les angles et leurs mesures",
                emoji: "üìê",
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "Comprendre les angles et leurs types",
                    cours: {
                        definition: "Un angle est form√© par deux demi-droites qui ont la m√™me origine. On mesure les angles en degr√©s.",
                        proprietes: [
                            "Angle droit : 90¬∞",
                            "Angle plat : 180¬∞", 
                            "Angle aigu : moins de 90¬∞",
                            "Angle obtus : entre 90¬∞ et 180¬∞"
                        ]
                    }
                }
            },

            'symetrie': {
                titre: "Sym√©trie axiale",
                description: "Comprendre la sym√©trie par rapport √† un axe",
                emoji: "ü™û",
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "D√©couvrir la sym√©trie axiale",
                    cours: {
                        definition: "Deux figures sont sym√©triques par rapport √† un axe si elles se superposent par pliage le long de cet axe.",
                        proprietes: [
                            "L'axe de sym√©trie est perpendiculaire au segment qui joint un point et son sym√©trique",
                            "Il passe par le milieu de ce segment",
                            "Les distances sont conserv√©es"
                        ]
                    }
                }
            },

            'perimetre-aire': {
                titre: "P√©rim√®tres et aires",
                description: "Calculer p√©rim√®tres et aires de figures simples",
                emoji: "üìè",
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "Calculer p√©rim√®tres et aires",
                    cours: {
                        definition: "Le p√©rim√®tre est la longueur du contour d'une figure. L'aire est la mesure de sa surface.",
                        proprietes: [
                            "P√©rim√®tre du carr√© : 4 √ó c√¥t√©",
                            "P√©rim√®tre du rectangle : 2 √ó (longueur + largeur)",
                            "Aire du carr√© : c√¥t√© √ó c√¥t√©",
                            "Aire du rectangle : longueur √ó largeur"
                        ]
                    }
                }
            },

            'volumes': {
                titre: "Volumes",
                description: "D√©couvrir les solides et leurs volumes",
                emoji: "üì¶",
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "Comprendre les volumes des solides",
                    cours: {
                        definition: "Le volume mesure l'espace occup√© par un solide. Il s'exprime en unit√©s cubes.",
                        proprietes: [
                            "Volume du cube : ar√™te¬≥",
                            "Volume du pav√© : longueur √ó largeur √ó hauteur",
                            "Unit√©s : cm¬≥, dm¬≥ = L, m¬≥"
                        ]
                    }
                }
            },

            'cercle': {
                titre: "Le cercle",
                description: "Propri√©t√©s et construction du cercle",
                emoji: "‚≠ï",
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "D√©couvrir le cercle et ses propri√©t√©s",
                    cours: {
                        definition: "Un cercle est l'ensemble de tous les points situ√©s √† √©gale distance d'un point appel√© centre.",
                        proprietes: [
                            "Rayon : distance du centre √† un point du cercle",
                            "Diam√®tre : 2 √ó rayon",
                            "Construction au compas",
                            "P√©rim√®tre ‚âà 3,14 √ó diam√®tre"
                        ]
                    }
                }
            },

            'unites-longueur': {
                titre: "Unit√©s de longueur",
                description: "Mesurer et convertir des longueurs",
                emoji: "üìè",
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "Ma√Ætriser les conversions de longueurs",
                    cours: {
                        definition: "Pour mesurer des longueurs, on utilise le m√®tre et ses multiples et sous-multiples.",
                        proprietes: [
                            "km, hm, dam, m, dm, cm, mm",
                            "Chaque unit√© vaut 10 fois la suivante",
                            "Conversions : √ó 10 ou √∑ 10"
                        ]
                    }
                }
            },

            'unites-masse': {
                titre: "Unit√©s de masse",
                description: "Mesurer et convertir des masses",
                emoji: "‚öñÔ∏è",
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "Ma√Ætriser les conversions de masses",
                    cours: {
                        definition: "Pour mesurer des masses, on utilise le gramme et ses multiples et sous-multiples.",
                        proprietes: [
                            "t, q, kg, hg, dag, g, dg, cg, mg",
                            "1 kg = 1000 g",
                            "1 t = 1000 kg"
                        ]
                    }
                }
            },

            'pourcentages': {
                titre: "Pourcentages",
                description: "Comprendre et calculer des pourcentages",
                emoji: "%",
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "Comprendre les pourcentages",
                    cours: {
                        definition: "Un pourcentage exprime une proportion sur 100. 25% signifie 25 sur 100.",
                        proprietes: [
                            "25% = 25/100 = 0,25",
                            "50% = 1/2 = 0,5",
                            "100% = le tout complet"
                        ]
                    }
                }
            },

            'problemes': {
                titre: "R√©solution de probl√®mes",
                description: "M√©thodes pour r√©soudre des probl√®mes math√©matiques",
                emoji: "üß©",
                phase2: {
                    titre: "üìö J'apprends",
                    objectif: "D√©velopper une m√©thode de r√©solution",
                    cours: {
                        definition: "R√©soudre un probl√®me n√©cessite une m√©thode : comprendre, analyser, calculer, v√©rifier.",
                        proprietes: [
                            "1. Lire et comprendre l'√©nonc√©",
                            "2. Identifier les donn√©es et la question",
                            "3. Choisir l'op√©ration appropri√©e",
                            "4. Effectuer les calculs",
                            "5. V√©rifier et r√©diger la r√©ponse"
                        ]
                    }
                }
            }
        };

        // Variables globales
        let currentModule = '';
        let currentPhase = 'phase1';
        let currentExercise = 0;
        let score = 0;
        let totalExercises = 0;
        let userAnswers = {};

        // Gestion de l'URL pour le chargement direct de modules
        function handleURLParameters() {
            const urlParams = new URLSearchParams(window.location.search);
            const moduleParam = urlParams.get('module');
            
            if (moduleParam && moduleParam.startsWith('mathematiques-6ieme-')) {
                const moduleName = moduleParam.replace('mathematiques-6ieme-', '');
                if (modulesData[moduleName]) {
                    showMathModules();
                    setTimeout(() => loadModule(moduleName), 100);
                }
            }
        }

        // Navigation
        function showMainNav() {
            hideAllSections();
            document.getElementById('main-nav').classList.remove('hidden');
        }

        function showMathModules() {
            hideAllSections();
            document.getElementById('math-modules').classList.remove('hidden');
            generateModulesGrid();
        }

        function showProgress() {
            hideAllSections();
            document.getElementById('progress-section').classList.remove('hidden');
            updateProgressDisplay();
        }

        function hideAllSections() {
            const sections = ['main-nav', 'math-modules', 'lesson-area', 'progress-section'];
            sections.forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
        }

        // G√©n√©ration de la grille des modules
        function generateModulesGrid() {
            const container = document.getElementById('modules-container');
            const progress = JSON.parse(localStorage.getItem('funrevis-progress') || '{}');
            
            let html = '';
            for (const [key, module] of Object.entries(modulesData)) {
                const moduleProgress = progress[key];
                const progressBadge = moduleProgress ? 
                    `<div class="module-progress">${Math.round((moduleProgress.score / moduleProgress.total) * 100)}%</div>` : '';
                
                html += `
                    <div class="module-card" onclick="loadModule('${key}')">
                        ${progressBadge}
                        <h4>${module.emoji} ${module.titre}</h4>
                        <p>${module.description}</p>
                    </div>
                `;
            }
            container.innerHTML = html;
        }

        // Chargement d'un module
        function loadModule(moduleName) {
            if (!modulesData[moduleName]) {
                alert('Module non disponible');
                return;
            }

            currentModule = moduleName;
            currentPhase = 'phase1';
            currentExercise = 0;
            score = 0;
            userAnswers = {};

            hideAllSections();
            document.getElementById('lesson-area').classList.remove('hidden');
            
            const moduleTitle = document.getElementById('module-title');
            moduleTitle.textContent = `${modulesData[moduleName].emoji} ${modulesData[moduleName].titre}`;
            
            generatePhaseTabs();
            loadPhase('phase1');
        }

        // G√©n√©ration des onglets de phases
        function generatePhaseTabs() {
            const module = modulesData[currentModule];
            const tabsContainer = document.getElementById('phase-tabs');
            
            let html = '';
            const phases = ['phase1', 'phase2', 'phase3', 'phase4'];
            
            phases.forEach(phaseKey => {
                if (module[phaseKey]) {
                    const phase = module[phaseKey];
                    const activeClass = phaseKey === currentPhase ? 'active' : '';
                    html += `
                        <button class="phase-tab ${activeClass}" onclick="loadPhase('${phaseKey}')" data-phase="${phaseKey}">
                            ${phase.titre}
                        </button>
                    `;
                }
            });
            
            tabsContainer.innerHTML = html;
        }

        // Chargement d'une phase
        function loadPhase(phaseKey) {
            currentPhase = phaseKey;
            const module = modulesData[currentModule];
            const phase = module[phaseKey];
            
            if (!phase) {
                console.log('Phase non trouv√©e:', phaseKey);
                return;
            }

            console.log('Chargement de la phase:', phaseKey, phase.titre);

            // Mettre √† jour les onglets
            document.querySelectorAll('.phase-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-phase') === phaseKey) {
                    tab.classList.add('active');
                }
            });

            const content = document.getElementById('lesson-content');
            
            if (phaseKey === 'phase2' && phase.cours) {
                // Phase d'apprentissage avec cours
                content.innerHTML = generateCourseContent(phase);
            } else if (phase.exercices && phaseKey !== 'phase4') {
                // Phase avec exercices (mais pas phase 4)
                content.innerHTML = generateExerciseContent(phase);
            } else if (phaseKey === 'phase4') {
                // Phase m√©tacognitive
                content.innerHTML = generateMetacognitionContent(phase);
            } else {
                // Phase g√©n√©rique
                content.innerHTML = generateGenericPhaseContent(phase);
            }
        }

        // G√©n√©ration du contenu de cours
        function generateCourseContent(phase) {
            const cours = phase.cours;
            let html = `
                <h3>${phase.titre}</h3>
                <p><strong>Objectif :</strong> ${phase.objectif}</p>
            `;

            if (phase.consignes) {
                html += `<div class="aide"><strong>Consignes :</strong> ${phase.consignes}</div>`;
            }

            if (cours.introduction) {
                html += `
                    <div class="cours-section">
                        <h4>üåü Introduction</h4>
                        <p>${cours.introduction}</p>
                    </div>
                `;
            }
                
            html += `
                <div class="cours-section">
                    <h4>üìñ D√©finition</h4>
                    <p>${cours.definition}</p>
                </div>
            `;

            // Afficher les sections d√©taill√©es si elles existent
            if (cours.sections) {
                cours.sections.forEach(section => {
                    html += `
                        <div class="cours-section">
                            <h4>${section.titre}</h4>
                            <div class="section-content">
                                ${section.contenu.map(item => {
                                    if (item.startsWith('‚Ä¢')) {
                                        return `<p>${item}</p>`;
                                    } else {
                                        return `<p><strong>${item}</strong></p>`;
                                    }
                                }).join('')}
                            </div>
                        </div>
                    `;
                });
            }

            if (cours.proprietes) {
                html += `
                    <div class="properties-list">
                        <h4>üîë Propri√©t√©s importantes</h4>
                        <ul>
                            ${cours.proprietes.map(prop => `<li>${prop}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }

            if (cours.exemples) {
                html += `
                    <div class="examples-section">
                        <h4>üí° Exemples d'application</h4>
                        <ul>
                            ${cours.exemples.map(ex => `<li>${ex}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }

            if (cours.applications) {
                html += `
                    <div class="examples-section">
                        <h4>üåç Applications dans la vie</h4>
                        <p>${cours.applications}</p>
                    </div>
                `;
            }

            if (phase.exercices) {
                html += `<h4>üìù Exercices d'application</h4>`;
                html += generateExercises(phase.exercices);
            }

            return html;
        }

        // G√©n√©ration du contenu d'exercices
        function generateExerciseContent(phase) {
            let html = `
                <h3>${phase.titre}</h3>
                <p><strong>Objectif :</strong> ${phase.objectif}</p>
            `;
            
            if (phase.consignes) {
                html += `<div class="aide"><strong>Consignes :</strong> ${phase.consignes}</div>`;
            }
            
            html += generateExercises(phase.exercices);
            return html;
        }

        // G√©n√©ration du contenu g√©n√©rique pour les phases
        function generateGenericPhaseContent(phase) {
            let html = `
                <h3>${phase.titre}</h3>
                <p><strong>Objectif :</strong> ${phase.objectif}</p>
            `;

            if (phase.consignes) {
                html += `<div class="aide"><strong>Consignes :</strong> ${phase.consignes}</div>`;
            }

            if (phase.exercices) {
                html += generateExercises(phase.exercices);
            }

            return html;
        }

        // G√©n√©ration des exercices
        function generateExercises(exercices) {
            let html = '';
            
            exercices.forEach((exercice, index) => {
                html += `
                    <div class="exercice-item" id="exercice-${index}">
                        <div class="question">
                            Exercice ${index + 1}: ${exercice.question}
                        </div>
                `;

                if (exercice.type === 'qcm') {
                    html += `
                        <div class="options">
                            ${exercice.options.map((option, optIndex) => `
                                <div class="option" onclick="selectOption(${index}, ${optIndex})">
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    `;
                } else if (exercice.type === 'exercice') {
                    html += `
                        <input type="text" class="input-field" id="input-${index}" placeholder="Votre r√©ponse...">
                        <button class="btn" onclick="checkAnswer(${index})">V√©rifier</button>
                    `;
                }

                if (exercice.aide) {
                    html += `<div class="aide hidden" id="aide-${index}">üí° ${exercice.aide}</div>`;
                }

                html += `
                        <div class="explication hidden" id="explication-${index}"></div>
                    </div>
                `;
            });

            return html;
        }

        // G√©n√©ration du contenu m√©tacognitif
        function generateMetacognitionContent(phase) {
            let html = `
                <h3>${phase.titre}</h3>
                <p><strong>Objectif :</strong> ${phase.objectif}</p>
            `;

            if (phase.consignes) {
                html += `<div class="aide"><strong>Consignes :</strong> ${phase.consignes}</div>`;
            }
                
            html += `
                <div class="metacognition-section">
                    <h4>ü§î Questions de r√©flexion</h4>
                    <ul>
                        ${phase.questions.map(q => `<li>${q}</li>`).join('')}
                    </ul>
                </div>
            `;

            if (phase.activites) {
                phase.activites.forEach(activite => {
                    if (activite.type === 'auto-evaluation') {
                        html += `
                            <div class="auto-evaluation">
                                <h4>üìä Auto-√©valuation</h4>
                                <p>Coche les comp√©tences que tu penses ma√Ætriser :</p>
                                ${activite.criteres.map((critere, index) => `
                                    <div class="criteria-item">
                                        <input type="checkbox" id="criteria-${index}">
                                        <label for="criteria-${index}">${critere}</label>
                                    </div>
                                `).join('')}
                                <button class="btn" onclick="saveAutoEvaluation()">Sauvegarder mon √©valuation</button>
                            </div>
                        `;
                    } else if (activite.type === 'reflexion') {
                        html += `
                            <div class="metacognition-section">
                                <h4>üí≠ Questions suppl√©mentaires</h4>
                                <ul>
                                    ${activite.questions.map(q => `<li>${q}</li>`).join('')}
                                </ul>
                            </div>
                        `;
                    } else if (activite.type === 'projet') {
                        html += `
                            <div class="examples-section">
                                <h4>üéØ Projet √† r√©aliser</h4>
                                <p>${activite.description}</p>
                            </div>
                        `;
                    }
                });
            }

            return html;
        }

        // S√©lection d'option pour QCM
        function selectOption(exerciceIndex, optionIndex) {
            const module = modulesData[currentModule];
            const phase = module[currentPhase];
            const exercice = phase.exercices[exerciceIndex];
            
            // D√©s√©lectionner toutes les options de cet exercice
            const exerciceElement = document.getElementById(`exercice-${exerciceIndex}`);
            const options = exerciceElement.querySelectorAll('.option');
            
            options.forEach((option, index) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (index === exercice.correct) {
                    option.classList.add('correct');
                } else if (index === optionIndex && index !== exercice.correct) {
                    option.classList.add('incorrect');
                } else if (index === optionIndex) {
                    option.classList.add('selected');
                }
            });

            // Afficher l'explication
            const explicationDiv = document.getElementById(`explication-${exerciceIndex}`);
            explicationDiv.textContent = exercice.explication;
            explicationDiv.classList.remove('hidden');

            // Sauvegarder la r√©ponse
            userAnswers[`${currentPhase}-${exerciceIndex}`] = {
                selected: optionIndex,
                correct: optionIndex === exercice.correct
            };

            if (optionIndex === exercice.correct) {
                score++;
            }
        }

        // V√©rification de r√©ponse pour exercices libres
        function checkAnswer(exerciceIndex) {
            const input = document.getElementById(`input-${exerciceIndex}`);
            const userAnswer = input.value.trim().toLowerCase();
            
            const module = modulesData[currentModule];
            const phase = module[currentPhase];
            const exercice = phase.exercices[exerciceIndex];
            const correctAnswer = exercice.reponse.toLowerCase();

            const explicationDiv = document.getElementById(`explication-${exerciceIndex}`);
            
            if (userAnswer === correctAnswer) {
                explicationDiv.innerHTML = `‚úÖ Correct ! ${exercice.explication || ''}`;
                explicationDiv.style.background = '#d4edda';
                explicationDiv.style.color = '#155724';
                score++;
                userAnswers[`${currentPhase}-${exerciceIndex}`] = { correct: true };
            } else {
                explicationDiv.innerHTML = `‚ùå Incorrect. La bonne r√©ponse est : ${exercice.reponse}. ${exercice.explication || ''}`;
                explicationDiv.style.background = '#f8d7da';
                explicationDiv.style.color = '#721c24';
                userAnswers[`${currentPhase}-${exerciceIndex}`] = { correct: false };
                
                // Afficher l'aide si disponible
                if (exercice.aide) {
                    document.getElementById(`aide-${exerciceIndex}`).classList.remove('hidden');
                }
            }
            
            explicationDiv.classList.remove('hidden');
        }

        // Sauvegarde de l'auto-√©valuation
        function saveAutoEvaluation() {
            const checkboxes = document.querySelectorAll('[id^="criteria-"]');
            const evaluation = Array.from(checkboxes).map(cb => cb.checked);
            
            // Sauvegarder dans le localStorage
            const progress = JSON.parse(localStorage.getItem('funrevis-progress') || '{}');
            if (!progress[currentModule]) {
                progress[currentModule] = {};
            }
            progress[currentModule].autoEvaluation = evaluation;
            localStorage.setItem('funrevis-progress', JSON.stringify(progress));
            
            alert('Auto-√©valuation sauvegard√©e !');
        }

        // Sauvegarde des progr√®s
        function saveProgress() {
            const progress = JSON.parse(localStorage.getItem('funrevis-progress') || '{}');
            const totalQuestions = Object.keys(userAnswers).length;
            const correctAnswers = Object.values(userAnswers).filter(answer => answer.correct).length;
            
            progress[currentModule] = {
                score: correctAnswers,
                total: totalQuestions,
                date: new Date().toISOString(),
                phases: Object.keys(modulesData[currentModule]).filter(key => key.startsWith('phase'))
            };
            
            localStorage.setItem('funrevis-progress', JSON.stringify(progress));
        }

        // Affichage des progr√®s
        function updateProgressDisplay() {
            const progress = JSON.parse(localStorage.getItem('funrevis-progress') || '{}');
            const progressDiv = document.getElementById('progress-content');
            
            if (Object.keys(progress).length === 0) {
                progressDiv.innerHTML = '<p>Aucun progr√®s enregistr√©. Commencez par faire des exercices !</p>';
                return;
            }

            let html = '<h3>üìä Vos r√©sultats par module :</h3><div class="modules-grid">';
            
            for (const [module, data] of Object.entries(progress)) {
                const moduleInfo = modulesData[module];
                const percentage = data.total > 0 ? Math.round((data.score / data.total) * 100) : 0;
                const emoji = moduleInfo ? moduleInfo.emoji : 'üìö';
                const titre = moduleInfo ? moduleInfo.titre : module;
                
                html += `
                    <div class="module-card">
                        <h4>${emoji} ${titre}</h4>
                        <p>Score: ${data.score}/${data.total} (${percentage}%)</p>
                        <p>Date: ${new Date(data.date).toLocaleDateString()}</p>
                        ${data.autoEvaluation ? '<p>‚úÖ Auto-√©valuation compl√©t√©e</p>' : ''}
                    </div>
                `;
            }
            
            html += '</div>';
            progressDiv.innerHTML = html;
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            console.log('FunRevis application compl√®te d√©marr√©e');
            handleURLParameters();
            
            // Sauvegarder automatiquement les progr√®s lors de la fermeture
            window.addEventListener('beforeunload', saveProgress);
        });
    </script>
</body>
</html>
