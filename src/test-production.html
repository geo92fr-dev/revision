<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Production - Diagnostic</title>
</head>
<body>
    <h1>Diagnostic de Production</h1>
    <div id="results"></div>

    <script type="module">
        const results = document.getElementById('results');
        
        function log(message) {
            console.log(message);
            results.innerHTML += `<p>${message}</p>`;
        }
        
        log('üîç Test de chargement des modules en production...');
        
        // Test 1: Chargement direct du fichier moyenne.js
        try {
            const response = await fetch('./moyenne.js');
            const content = await response.text();
            log(`‚úÖ moyenne.js charg√©, taille: ${content.length} caract√®res`);
            
            if (content.includes('moyennes6eme')) {
                log('‚úÖ moyennes6eme trouv√© dans le contenu');
            } else {
                log('‚ùå moyennes6eme NOT trouv√© dans le contenu');
                log('Contenu d√©but:');
                log(content.substring(0, 500));
            }
        } catch (error) {
            log(`‚ùå Erreur chargement moyenne.js: ${error.message}`);
        }
        
        // Test 2: Import dynamique
        try {
            const module = await import('./moyenne.js');
            log(`‚úÖ Import r√©ussi, exports disponibles: ${Object.keys(module).join(', ')}`);
            
            if (module.moyennes6eme) {
                log('‚úÖ moyennes6eme accessible via import');
            } else {
                log('‚ùå moyennes6eme NOT accessible via import');
            }
        } catch (error) {
            log(`‚ùå Erreur import moyenne.js: ${error.message}`);
        }
        
        // Test 3: Horodatage du fichier
        try {
            const response = await fetch('./moyenne.js');
            const lastModified = response.headers.get('last-modified');
            log(`üìÖ Derni√®re modification: ${lastModified}`);
        } catch (error) {
            log(`‚ùå Erreur r√©cup√©ration headers: ${error.message}`);
        }
    </script>
</body>
</html>
