<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>üéì Cours - FunRevis V2</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .success-message {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            margin: 2rem 0;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        }
        
        .course-info {
            background: #f8fafc;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #667eea;
        }
        
        .navigation {
            margin-top: 2rem;
            text-align: center;
        }
        
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            margin: 0 0.5rem;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #6b7280;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="success-message">
            <h1>üéâ Navigation R√©ussie !</h1>
            <p>F√©licitations ! La navigation vers la page de cours fonctionne parfaitement.</p>
        </div>
        
        <div class="course-info">
            <h2>üìã Informations du cours</h2>
            <p><strong>URL actuelle :</strong> <span id="currentUrl"></span></p>
            <p><strong>Mati√®re :</strong> <span id="subject">Non d√©finie</span></p>
            <p><strong>Niveau :</strong> <span id="level">Non d√©fini</span></p>
            <p><strong>Sujet :</strong> <span id="topic">Non d√©fini</span></p>
        </div>
        
        <div class="course-info">
            <h3>‚úÖ Tests r√©ussis :</h3>
            <ul>
                <li>‚úÖ Navigation depuis l'accueil</li>
                <li>‚úÖ Navigation vers Math√©matiques</li>
                <li>‚úÖ Navigation vers 6√®me</li>
                <li>‚úÖ Clic sur "Commencer"</li>
                <li>‚úÖ Chargement de cette page</li>
                <li>‚úÖ JavaScript fonctionnel</li>
            </ul>
        </div>
        
        <div class="navigation">
            <a href="javascript:history.back()" class="btn btn-secondary">‚Üê Retour</a>
            <a href="../index.html" class="btn">üè† Accueil</a>
        </div>
    </div>

    <script type="module">
        async function loadCourseSimple() {
            const urlParams = new URLSearchParams(window.location.search);
            const subject = urlParams.get('subject');
            const level = urlParams.get('level');
            const topic = urlParams.get('topic');
            
            // Afficher les param√®tres imm√©diatement
            if (subject) document.getElementById('subject').textContent = subject;
            if (level) document.getElementById('level').textContent = level;
            if (topic) document.getElementById('topic').textContent = topic.replace('-', ' ');
            document.getElementById('currentUrl').textContent = window.location.href;
            
            // Si pas de param√®tres, on s'arr√™te l√†
            if (!subject || !level || !topic) {
                console.log('‚úÖ Page de cours debug charg√©e (sans param√®tres)');
                return;
            }
            
            try {
                // Chargement via import ES6 module
                const filePath = `../data/${subject}/${level}/${topic}.js`;
                console.log('üîÑ Chargement module:', filePath);
                
                const module = await import(filePath);
                console.log('‚úÖ Module charg√©:', Object.keys(module));
                
                // Strat√©gies pour r√©cup√©rer les donn√©es
                let courseData = null;
                
                // Strat√©gie 1: Export par d√©faut
                if (module.default) {
                    courseData = module.default;
                    console.log('üì¶ Utilisation export default');
                }
                // Strat√©gie 2: Export nomm√© avec convention
                else if (module[topic.replace('-', '') + level.replace('ieme', '') + 'eme']) {
                    courseData = module[topic.replace('-', '') + level.replace('ieme', '') + 'eme'];
                    console.log('üì¶ Utilisation export nomm√© convention 1');
                }
                // Strat√©gie 3: Premi√®re cl√© disponible
                else {
                    const keys = Object.keys(module).filter(k => k !== 'default');
                    if (keys.length > 0) {
                        courseData = module[keys[0]];
                        console.log('üì¶ Utilisation premi√®re cl√©:', keys[0]);
                    }
                }
                
                if (courseData) {
                    // Mise √† jour avec les vraies donn√©es
                    document.querySelector('.success-message h1').textContent = 'üéâ Cours Charg√© !';
                    document.querySelector('.success-message p').textContent = `Contenu du cours "${courseData.sousChapitre}" charg√© avec succ√®s.`;
                    
                    // Ajouter les d√©tails du cours
                    const courseDetails = document.createElement('div');
                    courseDetails.className = 'course-info';
                    courseDetails.innerHTML = `
                        <h3>üìö D√©tails du cours</h3>
                        <p><strong>Titre :</strong> ${courseData.sousChapitre}</p>
                        <p><strong>Chapitre :</strong> ${courseData.chapitre}</p>
                        <p><strong>Nombre de comp√©tences :</strong> ${courseData.competences?.length || 0}</p>
                    `;
                    
                    document.querySelector('.container').insertBefore(courseDetails, document.querySelector('.navigation'));
                    
                    console.log('‚úÖ Cours affich√© avec succ√®s');
                } else {
                    throw new Error('Aucune donn√©e trouv√©e dans le module');
                }
                
            } catch (error) {
                console.error('‚ùå Erreur chargement:', error);
                document.querySelector('.success-message').style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
                document.querySelector('.success-message h1').textContent = '‚ùå Erreur de chargement';
                document.querySelector('.success-message p').textContent = `Impossible de charger le cours: ${error.message}`;
            }
        }
        
        // Lancement au chargement
        window.addEventListener('load', loadCourseSimple);
        console.log('‚úÖ Script de cours ES6 initialis√©');
    </script>
</body>
</html>
