<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test 5Ã¨me - Validation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª Test de validation - 5Ã¨me MathÃ©matiques</h1>
    
    <div id="test-results">
        <div class="info">Chargement des tests...</div>
    </div>
    
    <h2>ğŸ”— Liens de test</h2>
    <ul>
        <li><a href="./pages/mathematiques/index.html" target="_blank">ğŸ“ Page mathÃ©matiques (voir tuile 5Ã¨me)</a></li>
        <li><a href="./pages/mathematiques/5ieme/index.html" target="_blank">ğŸ“š Page 5Ã¨me</a></li>
        <li><a href="./pages/cours.html?niveau=5eme&matiere=mathematiques&chapitre=nombres-calculs-fractions" target="_blank">â— Cours Fractions 5Ã¨me</a></li>
    </ul>
    
    <h2>ğŸ“Š DÃ©tails techniques</h2>
    <pre id="technical-details">Chargement...</pre>

    <script type="module">
        const resultsDiv = document.getElementById('test-results');
        const detailsDiv = document.getElementById('technical-details');
        
        async function runTests() {
            resultsDiv.innerHTML = '<div class="info">ğŸ”„ Tests en cours...</div>';
            
            const results = [];
            const details = [];
            
            try {
                // Test 1: AccÃ¨s Ã  la page 5Ã¨me
                details.push('Test 1: AccÃ¨s Ã  la page 5Ã¨me');
                try {
                    const response = await fetch('./pages/mathematiques/5ieme/index.html');
                    if (response.ok) {
                        results.push('<div class="success">âœ… Page 5Ã¨me accessible</div>');
                        details.push('  âœ… Page 5Ã¨me: OK (Status ' + response.status + ')');
                    } else {
                        results.push('<div class="error">âŒ Page 5Ã¨me non accessible</div>');
                        details.push('  âŒ Page 5Ã¨me: ERREUR (Status ' + response.status + ')');
                    }
                } catch (e) {
                    results.push('<div class="error">âŒ Erreur accÃ¨s page 5Ã¨me: ' + e.message + '</div>');
                    details.push('  âŒ Page 5Ã¨me: ERREUR - ' + e.message);
                }
                
                // Test 2: AccÃ¨s au fichier de donnÃ©es
                details.push('\\nTest 2: Fichier de donnÃ©es 5Ã¨me');
                try {
                    const response = await fetch('./data/mathematiques/5ieme/5e_nombres_calculs_fractions.js');
                    if (response.ok) {
                        const content = await response.text();
                        const hasStructure = content.includes('fractions5eme') && 
                                           content.includes('competences') &&
                                           content.includes('export default');
                        
                        if (hasStructure) {
                            results.push('<div class="success">âœ… Fichier de donnÃ©es bien structurÃ©</div>');
                            details.push('  âœ… Structure fractions5eme: OK');
                        } else {
                            results.push('<div class="error">âŒ Structure du fichier incorrecte</div>');
                            details.push('  âŒ Structure fractions5eme: MANQUANTE');
                        }
                    } else {
                        results.push('<div class="error">âŒ Fichier de donnÃ©es non accessible</div>');
                        details.push('  âŒ Fichier donnÃ©es: INACCESSIBLE (Status ' + response.status + ')');
                    }
                } catch (e) {
                    results.push('<div class="error">âŒ Erreur accÃ¨s donnÃ©es: ' + e.message + '</div>');
                    details.push('  âŒ DonnÃ©es: ERREUR - ' + e.message);
                }
                
                // Test 3: Index mathÃ©matiques
                details.push('\\nTest 3: Index mathÃ©matiques');
                try {
                    const response = await fetch('./data/mathematiques/index.js');
                    if (response.ok) {
                        const content = await response.text();
                        const has5eme = content.includes('5eme') && content.includes('mathematiques5eme');
                        
                        if (has5eme) {
                            results.push('<div class="success">âœ… 5Ã¨me intÃ©grÃ©e dans l\'index</div>');
                            details.push('  âœ… Index 5Ã¨me: OK');
                        } else {
                            results.push('<div class="error">âŒ 5Ã¨me manquante dans l\'index</div>');
                            details.push('  âŒ Index 5Ã¨me: MANQUANTE');
                        }
                    }
                } catch (e) {
                    results.push('<div class="error">âŒ Erreur index: ' + e.message + '</div>');
                    details.push('  âŒ Index: ERREUR - ' + e.message);
                }
                
                // RÃ©sultat final
                const successCount = results.filter(r => r.includes('success')).length;
                const totalTests = results.length;
                
                if (successCount === totalTests) {
                    results.unshift('<div class="success"><strong>ğŸ¯ SUCCÃˆS COMPLET: Tous les tests passent (' + successCount + '/' + totalTests + ')</strong></div>');
                    details.push('\\nğŸ¯ RÃ‰SULTAT: SUCCÃˆS COMPLET - La 5Ã¨me est entiÃ¨rement fonctionnelle!');
                } else {
                    results.unshift('<div class="error"><strong>âš ï¸ TESTS PARTIELS: ' + successCount + '/' + totalTests + ' tests rÃ©ussis</strong></div>');
                    details.push('\\nâš ï¸ RÃ‰SULTAT: Tests partiels - Certains Ã©lÃ©ments nÃ©cessitent une correction');
                }
                
                resultsDiv.innerHTML = results.join('');
                detailsDiv.textContent = details.join('\\n');
                
            } catch (error) {
                resultsDiv.innerHTML = '<div class="error">âŒ Erreur gÃ©nÃ©rale: ' + error.message + '</div>';
                detailsDiv.textContent = 'Erreur: ' + error.message;
            }
        }
        
        // Lancer les tests
        runTests();
    </script>
</body>
</html>
