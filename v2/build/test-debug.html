<!DOCTYPE html>
<html>
<head>
    <title>Test Debug</title>
</head>
<body>
    <h1>Test de Debug</h1>
    <div id="output"></div>
    
    <script>
        console.log('üöÄ Script ex√©cut√© !');
        document.getElementById('output').innerHTML = '<p style="color: green;">‚úÖ JavaScript fonctionne !</p>';
        
        // Test des param√®tres URL
        const urlParams = new URLSearchParams(window.location.search);
        const topic = urlParams.get('topic') || 'pas-de-topic';
        console.log('Topic:', topic);
        
        document.getElementById('output').innerHTML += `<p>Topic: ${topic}</p>`;
        
        // Test du chargement d'un script externe
        const script = document.createElement('script');
        script.src = '/data/mathematiques/6ieme/addition-soustraction.js';
        script.onload = function() {
            console.log('‚úÖ Script charg√©');
            document.getElementById('output').innerHTML += '<p style="color: green;">‚úÖ Script external charg√©</p>';
            
            // Attendre un peu pour que le script s'ex√©cute
            setTimeout(() => {
                // V√©rifier les variables globales plus pr√©cis√©ment
                console.log('Variables window avec data:', Object.keys(window).filter(k => k.includes('data')));
                console.log('Variables window avec addition:', Object.keys(window).filter(k => k.includes('addition')));
                console.log('window.data:', window.data);
                console.log('window.additionSoustraction6eme:', window.additionSoustraction6eme);
                
                document.getElementById('output').innerHTML += `<p>Variables avec 'data': ${Object.keys(window).filter(k => k.includes('data')).join(', ')}</p>`;
                document.getElementById('output').innerHTML += `<p>Variables avec 'addition': ${Object.keys(window).filter(k => k.includes('addition')).join(', ')}</p>`;
                document.getElementById('output').innerHTML += `<p>window.data existe: ${window.data ? '‚úÖ OUI' : '‚ùå NON'}</p>`;
                document.getElementById('output').innerHTML += `<p>window.additionSoustraction6eme existe: ${window.additionSoustraction6eme ? '‚úÖ OUI' : '‚ùå NON'}</p>`;
                
                if (window.data) {
                    document.getElementById('output').innerHTML += `<p style="color: green;">üéâ DONN√âES TROUV√âES ! Titre: ${window.data.competences?.[0]?.titre}</p>`;
                }
            }, 100);
        };
        script.onerror = function(e) {
            console.log('‚ùå Erreur script:', e);
            document.getElementById('output').innerHTML += '<p style="color: red;">‚ùå Erreur chargement script</p>';
        };
        document.head.appendChild(script);
    </script>
</body>
</html>
