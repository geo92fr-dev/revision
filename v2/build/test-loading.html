<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Test de chargement des fichiers corrigÃ©s</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .success { color: green; }
        .error { color: red; }
        .summary { 
            background: #f0f0f0; 
            padding: 15px; 
            border-radius: 5px; 
            margin-top: 20px; 
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª Test de chargement des fichiers JavaScript corrigÃ©s</h1>
    <p>Cette page teste si tous les fichiers de donnÃ©es se chargent correctement dans le navigateur.</p>
    
    <div id="results"></div>
    <div id="summary" class="summary" style="display: none;"></div>

    <script>
        const files = [
            'data/mathematiques/6ieme/nombres-decimaux.js',
            'data/mathematiques/6ieme/fractions-simples.js',
            'data/mathematiques/6ieme/symetrie-axiale.js',
            'data/mathematiques/6ieme/constructions-geometriques.js',
            'data/mathematiques/6ieme/unites-masse-capacite.js',
            'data/mathematiques/6ieme/unites-longueur.js',
            'data/mathematiques/6ieme/durees.js',
            'data/mathematiques/6ieme/lecture-tableaux.js',
            'data/mathematiques/6ieme/graphiques.js'
        ];

        const results = document.getElementById('results');
        const summary = document.getElementById('summary');
        let loadedCount = 0;
        let errorCount = 0;
        let totalCount = files.length;

        console.log('ğŸš€ DÃ©but du test de chargement...');

        files.forEach((file, index) => {
            const script = document.createElement('script');
            script.src = file;
            
            script.onload = () => {
                loadedCount++;
                console.log(`âœ… ${file} chargÃ© avec succÃ¨s`);
                results.innerHTML += `<p class="success">âœ… ${file} chargÃ© avec succÃ¨s</p>`;
                
                // VÃ©rifier si window.data est dÃ©fini
                if (window.data) {
                    results.innerHTML += `<p style="color: blue; margin-left: 20px;">ğŸ“Š DonnÃ©es disponibles: ${Object.keys(window.data).length} propriÃ©tÃ©s</p>`;
                }
                
                checkComplete();
            };
            
            script.onerror = (error) => {
                errorCount++;
                console.error(`âŒ Erreur lors du chargement de ${file}:`, error);
                results.innerHTML += `<p class="error">âŒ Erreur lors du chargement de ${file}</p>`;
                checkComplete();
            };
            
            document.head.appendChild(script);
        });

        function checkComplete() {
            if (loadedCount + errorCount === totalCount) {
                const successRate = ((loadedCount / totalCount) * 100).toFixed(1);
                
                summary.style.display = 'block';
                summary.innerHTML = `
                    <h2>ğŸ“Š RÃ©sultats du test</h2>
                    <p><strong>Fichiers chargÃ©s avec succÃ¨s:</strong> ${loadedCount}/${totalCount} (${successRate}%)</p>
                    <p><strong>Erreurs:</strong> ${errorCount}</p>
                    ${loadedCount === totalCount ? 
                        '<p class="success"><strong>ğŸ‰ Tous les fichiers ont Ã©tÃ© chargÃ©s avec succÃ¨s !</strong></p>' :
                        '<p class="error"><strong>âš ï¸ Certains fichiers n\'ont pas pu Ãªtre chargÃ©s.</strong></p>'
                    }
                `;
                
                console.log(`ğŸ“Š Test terminÃ©: ${loadedCount}/${totalCount} fichiers chargÃ©s (${successRate}%)`);
            }
        }
    </script>
</body>
</html>
