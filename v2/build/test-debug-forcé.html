<!DOCTYPE html>
<html>
<head>
    <title>Test Debug ForcÃ©</title>
</head>
<body>
    <h1>Test avec Cache Bust</h1>
    <div id="output"></div>
    
    <script>
        console.log('ğŸš€ Script exÃ©cutÃ© !');
        document.getElementById('output').innerHTML = '<p style="color: green;">âœ… JavaScript fonctionne !</p>';
        
        // Test des paramÃ¨tres URL
        const urlParams = new URLSearchParams(window.location.search);
        const topic = urlParams.get('topic') || 'pas-de-topic';
        console.log('Topic:', topic);
        
        document.getElementById('output').innerHTML += `<p>Topic: ${topic}</p>`;
        
        // Test du chargement avec cache bust
        const timestamp = new Date().getTime();
        const script = document.createElement('script');
        script.src = `/data/mathematiques/6ieme/addition-soustraction.js?v=${timestamp}`;
        console.log('ğŸ”„ Chargement script avec URL:', script.src);
        
        script.onload = function() {
            console.log('âœ… Script chargÃ© avec cache bust');
            document.getElementById('output').innerHTML += '<p style="color: green;">âœ… Script external chargÃ© (cache bust)</p>';
            
            // Attendre un peu
            setTimeout(() => {
                console.log('ğŸ” VÃ©rification window.data:', window.data);
                console.log('ğŸ” VÃ©rification window.additionSoustraction6eme:', window.additionSoustraction6eme);
                
                document.getElementById('output').innerHTML += `<p>window.data existe: ${window.data ? 'âœ… OUI' : 'âŒ NON'}</p>`;
                document.getElementById('output').innerHTML += `<p>window.additionSoustraction6eme existe: ${window.additionSoustraction6eme ? 'âœ… OUI' : 'âŒ NON'}</p>`;
                
                if (window.data) {
                    document.getElementById('output').innerHTML += `<p style="color: green;">ğŸ‰ DONNÃ‰ES TROUVÃ‰ES ! Titre: ${window.data.competences?.[0]?.titre}</p>`;
                    document.getElementById('output').innerHTML += `<p style="color: blue;">ğŸ“š Cours: ${window.data.competences?.[0]?.cours?.substring(0, 100)}...</p>`;
                }
            }, 200);
        };
        
        script.onerror = function(e) {
            console.log('âŒ Erreur script:', e);
            document.getElementById('output').innerHTML += '<p style="color: red;">âŒ Erreur chargement script</p>';
        };
        
        document.head.appendChild(script);
    </script>
</body>
</html>
